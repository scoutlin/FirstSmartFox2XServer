package my.test;

import com.smartfoxserver.v2.entities.User;
import com.smartfoxserver.v2.entities.data.ISFSObject;
import com.smartfoxserver.v2.entities.data.SFSObject;
import com.smartfoxserver.v2.extensions.BaseClientRequestHandler;

public class UserMsgHandler extends BaseClientRequestHandler {

	private static String allMsg = "";
	
	@Override
	public void handleClientRequest(User player, ISFSObject arg1) {
		// TODO Auto-generated method stub

		String userMsg = arg1.getUtfString("UserMsg");

		trace(userMsg);
		
		if(userMsg == "SCOTT_CLEAR")
		{
			this.allMsg = "";
				
			ISFSObject mISFSObject = new SFSObject();
			
			mISFSObject.putUtfString("UserMsg", this.allMsg);
			
			MyExtension myExtension = (MyExtension)getParentExtension();
			myExtension.send("UserMsg", mISFSObject, player);
			trace("From Client: " + userMsg);
		}
		else
		{
			this.allMsg += player.getName() + ": " + userMsg + "\n";
			
			ISFSObject mISFSObject = new SFSObject();
			
			mISFSObject.putUtfString("UserMsg", allMsg);
			
			MyExtension myExtension = (MyExtension)getParentExtension();
			myExtension.send("UserMsg", mISFSObject, player);
			trace("From Client: " + userMsg);
		}
	}
}
